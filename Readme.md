# InferQÂ Dataset â€“Â Contributor Guide

Welcome, **InferQ Honours Partner!** ðŸš€ This README is your oneâ€‘stop manual for
setting up the repo, generatingÂ & pushing new quantum circuits, and never
downloading more data than you need.

---

## 0Â Â Project snapshot

| Item               | Purpose                                                                 |
| ------------------ | ----------------------------------------------------------------------- |
| `generator/`       | Scripts that **create** circuits                                        |
| `utils/`           | Reâ€‘usable code (feature extractors, utils)                              |
| `circuits/`        | One dir **per circuit**:<br>`<uuid>/` â†’ `meta.json` + `circuit.qpy.dvc` |
| `MANIFEST.parquet` | Master index built from all `meta.json` files                           |
| `.dvc/`            | DVC config â€“Â points at the shared bucket                                |

All heavy `.qpy` blobs live **only in the remote bucket**; the repo keeps a
fewâ€‘byte pointer file and textual metadata.

---

## 1Â Â Prerequisites (install **once**)

| Tool        | macOS / Linux                                                                 | Windows (PowerShell)    | Why we need it                                                             |       |                                           |
| ----------- | ----------------------------------------------------------------------------- | ----------------------- | -------------------------------------------------------------------------- | ----- | ----------------------------------------- |
| **uv**      | \`curl -Ls [https://astral.sh/uv/install.sh](https://astral.sh/uv/install.sh) | bash\`                  | \`irm [https://astral.sh/uv/install.ps1](https://astral.sh/uv/install.ps1) | iex\` | Python env + superâ€‘fast package installer |
| **DVC**     | `uv pip install "dvc[s3]"` <br>(change `[s3]`â†’`[azure]` etc.)                 | same                    | Tracks & pushes `.qpy` files to remote                                     |       |                                           |
| **GitÂ LFS** | `brew install gitâ€‘lfs` Â Â *or*Â Â `apt install gitâ€‘lfs`                          | `choco install gitâ€‘lfs` | (Only for the tiny _dev_ subset)                                           |       |                                           |

> **KeysÂ & endpoint** â€“ ask Andrei for the AWSÂ `ACCESS_KEY`, `SECRET_KEY`, and
> bucketÂ URL. Put them in your shell rc or use a `.env` file.

---

## 2Â Â Firstâ€‘time clone

```bash
# 1Â clone code (no big data!)
git clone git@github.com:inferq/inferq-dataset.git
cd inferq-dataset

# 2Â create Python env & install deps (seconds)
uv venv --python 3.12
source .venv/bin/activate          # Win: .venv\Scripts\activate
uv pip sync                        # reads requirements.lock

# 3Â (optional) pull the tiny dev subset
# dvc pull circuits_dev/**/*qpy.dvc
```

If you **only** want to run generators & push new stuff, youâ€™re done â€“ skip the
pull.

---

## 3Â Â Generating & pushing a new circuit

```bash
# AÂ make a circuit â€“ script prompts write into circuits/<uuid>/
python generator/build_ghz.py 512

# BÂ track the heavy binary (creates .dvc pointer)
dvc add circuits/*/*circuit.qpy

# CÂ rebuild manifest (autoâ€‘hook does this too)
python generator/build_manifest.py

# DÂ commit lightweight files
git add circuits/**/*meta.json circuits/**/*qpy.dvc MANIFEST.parquet
git commit -m "Add 512â€‘qubit GHZ"

git push          # just code & text

dvc push          # uploads *only* this new .qpy blob
```

Thatâ€™s it! Other collaborators only see a 2â€‘kB diff unless they choose to
`dvc pull` your circuit.

---

## 4Â Â Downloading **just one** heavy circuit

```bash
# pulls one file; never fetches the full bucket
 dvc pull circuits/ab12ef34/circuit.qpy.dvc
```

Need stats but not the circuit? Read the master Parquet:

```python
import pandas as pd
df = pd.read_parquet("MANIFEST.parquet")
```

---

## 5Â Â Directory rules & naming

\*Â Each circuit lives in its own folder `<uuid>/` generated by `uuid.uuid4().hex`.
\*Â Put **exactly two files** inside:
\*Â `meta.json` â€“Â small metadata
\*Â `circuit.qpy` (tracked via `.dvc` pointer)
\*Â Never rename folders after commit; UUID is immutable key.

---

## 6Â Â Troubleshooting

| Symptom                              | Fix                                                                       |
| ------------------------------------ | ------------------------------------------------------------------------- |
| `dvc push` asks for creds            | Export `AWS_ACCESS_KEY_ID` + `AWS_SECRET_ACCESS_KEY` (or Azure SAS token) |
| Merge conflict in `MANIFEST.parquet` | Run `python generator/build_manifest.py`, `git add`, then reâ€‘commit       |
| â€œfile already tracked by DVCâ€        | Remove duplicate `dvc add` or use unique UUID dirs                        |

---

## 7Â Â Updating dependencies

```bash
uv pip up --upgrade                 # upgrades all pinned wheels
uv pip compile requirements.in -o requirements.lock
uv pip sync
```

Commit both `requirements.in` & `requirements.lock`.

---

## 8Â Â FAQ

> **QÂ Do I ever need to run `dvc pull`?**
> Only if you want to **simulate / inspect** an existing heavy circuit.
>
> **QÂ What if Iâ€™m offline?**
> All generators, feature extractors and tests work with _zero_ remote data.
>
> **QÂ Can I use GoogleÂ Cloud / MinIO instead of S3?**
> Yes â€“ owner will change the default remote in `.dvc/config`.

---
